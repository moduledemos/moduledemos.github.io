{"id":611,"date":"2019-11-30T17:41:47","date_gmt":"2019-12-01T01:41:47","guid":{"rendered":"http:\/\/modulesafari.com\/?p=611"},"modified":"2019-11-30T17:54:00","modified_gmt":"2019-12-01T01:54:00","slug":"certmagic-automagic-https-for-golang","status":"publish","type":"post","link":"http:\/\/modulesafari.com\/certmagic-automagic-https-for-golang\/","title":{"rendered":"Certmagic; Automagic HTTPS for Golang"},"content":{"rendered":"\n<p>Certmagic is a <a href=\"http:\/\/modulesafari.com\/category\/go\/\" target=\"_blank\" rel=\"noreferrer noopener\" aria-label=\"Golang (opens in a new tab)\">Golang<\/a> library which allows to user to easily and automatically setup HTTPS on their application. So easy, that it can be done within a single line of code. Sounds crazy, doesn&#8217;t it? Well, let&#8217;s give it a try and see how well it works. For this review, I will be hosting it on the subdomain certmagic of this site. <\/p>\n\n\n\n<h2>Setup<\/h2>\n\n\n\n<p>I am going to glance over the setting up of the actual domain for this post, but the important part of this is that I have DNS set up correctly, and have a remote Linux host setup and running. Now, I just need to deploy the code to this host and see what happens, here is the code I used. <\/p>\n\n\n\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"c\" data-enlighter-theme=\"\" data-enlighter-highlight=\"\" data-enlighter-linenumbers=\"\" data-enlighter-lineoffset=\"\" data-enlighter-title=\"\" data-enlighter-group=\"\">package main\n\nimport(\n\t\"net\/http\"\n\n\t\"github.com\/gorilla\/mux\"\n\t\"github.com\/mholt\/certmagic\"\n)\n\nfunc main() {\n\trouter := mux.NewRouter()\n\trouter.HandleFunc(\"\/\", func(w http.ResponseWriter, r *http.Request){\n\t\tw.Write([]byte(\"Hello world\"))\n\t}).Methods(\"GET\", \"OPTIONS\")\n\tcertmagic.HTTPS([]string{\"certmagic.modulesafari.com\"}, router)\n}<\/pre>\n\n\n\n<p>As you can see, the Go code is extremely simple, the call to Certmagic that initiates all of the logic to get the cert is a very simple one-liner, and can handle multiple domains. <\/p>\n\n\n\n<h2>Execution<\/h2>\n\n\n\n<p>So, I put this code on the server, compiled it, and then ran it. Within 10 seconds, it had already completed the acme-challenge and obtained a certificate. That is very impressive! I was expected to have the time to get a cup of coffee. I barely had time to get out of my chair. <\/p>\n\n\n\n<figure class=\"wp-block-image size-large is-resized\"><img loading=\"lazy\" src=\"http:\/\/modulesafari.com\/wp-content\/uploads\/2019\/11\/certmagic-1-1024x262.png\" alt=\"golang certmagic output\" class=\"wp-image-621\" width=\"1024\" height=\"262\" srcset=\"http:\/\/modulesafari.com\/wp-content\/uploads\/2019\/11\/certmagic-1-980x251.png 980w, http:\/\/modulesafari.com\/wp-content\/uploads\/2019\/11\/certmagic-1-480x123.png 480w\" sizes=\"(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) and (max-width: 980px) 980px, (min-width: 981px) 1024px, 100vw\" \/><\/figure>\n\n\n\n<p>Of course, I had to check in the browser to make sure, and behold, it&#8217;s alive!<\/p>\n\n\n\n<figure class=\"wp-block-image size-large is-resized\"><img loading=\"lazy\" src=\"http:\/\/modulesafari.com\/wp-content\/uploads\/2019\/11\/certmagic-proof.png\" alt=\"certmagic browser https\" class=\"wp-image-619\" width=\"904\" height=\"192\" srcset=\"http:\/\/modulesafari.com\/wp-content\/uploads\/2019\/11\/certmagic-proof.png 904w, http:\/\/modulesafari.com\/wp-content\/uploads\/2019\/11\/certmagic-proof-480x102.png 480w\" sizes=\"(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) 904px, 100vw\" \/><\/figure>\n\n\n\n<p>So, would I use Certmagic in production Golang services? It depends. I don&#8217;t imagine this being an effective solution if you are behind a load balancer. It also won&#8217;t work automagically if you are behind Cloudflare, I tried. The place were it really shines is when you have a very small service that you want to be secure. It is great for when you just want it to work on its own and not have to worry about it. It is definitely worth checking out, which you can do <a href=\"https:\/\/github.com\/mholt\/certmagic\">here<\/a>. Props to <a href=\"https:\/\/github.com\/sponsors\/mholt\">mholt<\/a> for such a cool library! <\/p>\n\n\n\n<p><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Certmagic is a Golang library which allows to user to easily and automatically setup HTTPS on their application. So easy, that it can be done within a single line of code. Sounds crazy, doesn&#8217;t it? Well, let&#8217;s give it a try and see how well it works. For this review, I will be hosting it [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":630,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_et_pb_use_builder":"off","_et_pb_old_content":"","_et_gb_content_width":""},"categories":[6],"tags":[9,227],"yst_prominent_words":[222,138,229,224,189,225,223,226,230],"yoast_head":"<!-- This site is optimized with the Yoast SEO Premium plugin v14.1 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Certmagic; Automagic HTTPS for Golang - Module Safari<\/title>\n<meta name=\"description\" content=\"Certmagic is a Golang library which allows to user to easily and automatically setup HTTPS on their application. Sounds crazy, doesn&#039;t it?\" \/>\n<meta name=\"robots\" content=\"index, follow\" \/>\n<meta name=\"googlebot\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<meta name=\"bingbot\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"http:\/\/modulesafari.com\/certmagic-automagic-https-for-golang\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Certmagic; Automagic HTTPS for Golang - Module Safari\" \/>\n<meta property=\"og:description\" content=\"Certmagic is a Golang library which allows to user to easily and automatically setup HTTPS on their application. Sounds crazy, doesn&#039;t it?\" \/>\n<meta property=\"og:url\" content=\"http:\/\/modulesafari.com\/certmagic-automagic-https-for-golang\/\" \/>\n<meta property=\"og:site_name\" content=\"Module Safari\" \/>\n<meta property=\"article:published_time\" content=\"2019-12-01T01:41:47+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2019-12-01T01:54:00+00:00\" \/>\n<meta property=\"og:image\" content=\"http:\/\/modulesafari.com\/wp-content\/uploads\/2019\/11\/ssl-2890762_960_720.jpg\" \/>\n\t<meta property=\"og:image:width\" content=\"960\" \/>\n\t<meta property=\"og:image:height\" content=\"654\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"http:\/\/modulesafari.com\/#organization\",\"name\":\"Module Safari\",\"url\":\"http:\/\/modulesafari.com\/\",\"sameAs\":[],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"http:\/\/modulesafari.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"http:\/\/modulesafari.com\/wp-content\/uploads\/2019\/11\/PNG-Logo-02-not-transparent.png\",\"width\":2026,\"height\":530,\"caption\":\"Module Safari\"},\"image\":{\"@id\":\"http:\/\/modulesafari.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"http:\/\/modulesafari.com\/#website\",\"url\":\"http:\/\/modulesafari.com\/\",\"name\":\"Module Safari\",\"description\":\"development simplified\",\"publisher\":{\"@id\":\"http:\/\/modulesafari.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"http:\/\/modulesafari.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"http:\/\/modulesafari.com\/certmagic-automagic-https-for-golang\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"http:\/\/modulesafari.com\/wp-content\/uploads\/2019\/11\/ssl-2890762_960_720.jpg\",\"width\":960,\"height\":654},{\"@type\":\"WebPage\",\"@id\":\"http:\/\/modulesafari.com\/certmagic-automagic-https-for-golang\/#webpage\",\"url\":\"http:\/\/modulesafari.com\/certmagic-automagic-https-for-golang\/\",\"name\":\"Certmagic; Automagic HTTPS for Golang - Module Safari\",\"isPartOf\":{\"@id\":\"http:\/\/modulesafari.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"http:\/\/modulesafari.com\/certmagic-automagic-https-for-golang\/#primaryimage\"},\"datePublished\":\"2019-12-01T01:41:47+00:00\",\"dateModified\":\"2019-12-01T01:54:00+00:00\",\"description\":\"Certmagic is a Golang library which allows to user to easily and automatically setup HTTPS on their application. Sounds crazy, doesn't it?\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"http:\/\/modulesafari.com\/certmagic-automagic-https-for-golang\/\"]}]},{\"@type\":\"Article\",\"@id\":\"http:\/\/modulesafari.com\/certmagic-automagic-https-for-golang\/#article\",\"isPartOf\":{\"@id\":\"http:\/\/modulesafari.com\/certmagic-automagic-https-for-golang\/#webpage\"},\"author\":{\"@id\":\"http:\/\/modulesafari.com\/#\/schema\/person\/a31876f85a9f031cf62afd4e79f746aa\"},\"headline\":\"Certmagic; Automagic HTTPS for Golang\",\"datePublished\":\"2019-12-01T01:41:47+00:00\",\"dateModified\":\"2019-12-01T01:54:00+00:00\",\"commentCount\":0,\"mainEntityOfPage\":{\"@id\":\"http:\/\/modulesafari.com\/certmagic-automagic-https-for-golang\/#webpage\"},\"publisher\":{\"@id\":\"http:\/\/modulesafari.com\/#organization\"},\"image\":{\"@id\":\"http:\/\/modulesafari.com\/certmagic-automagic-https-for-golang\/#primaryimage\"},\"keywords\":\"golang,https\",\"articleSection\":\"Golang\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"http:\/\/modulesafari.com\/certmagic-automagic-https-for-golang\/#respond\"]}]},{\"@type\":[\"Person\"],\"@id\":\"http:\/\/modulesafari.com\/#\/schema\/person\/a31876f85a9f031cf62afd4e79f746aa\",\"name\":\"Nathaniel Blakely\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"http:\/\/modulesafari.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"http:\/\/1.gravatar.com\/avatar\/1d85a4c5bf257b6a8972ab9bbaee0b51?s=96&d=mm&r=g\",\"caption\":\"Nathaniel Blakely\"}}]}<\/script>\n<!-- \/ Yoast SEO Premium plugin. -->","_links":{"self":[{"href":"http:\/\/modulesafari.com\/wp-json\/wp\/v2\/posts\/611"}],"collection":[{"href":"http:\/\/modulesafari.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/modulesafari.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/modulesafari.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/modulesafari.com\/wp-json\/wp\/v2\/comments?post=611"}],"version-history":[{"count":11,"href":"http:\/\/modulesafari.com\/wp-json\/wp\/v2\/posts\/611\/revisions"}],"predecessor-version":[{"id":629,"href":"http:\/\/modulesafari.com\/wp-json\/wp\/v2\/posts\/611\/revisions\/629"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/modulesafari.com\/wp-json\/wp\/v2\/media\/630"}],"wp:attachment":[{"href":"http:\/\/modulesafari.com\/wp-json\/wp\/v2\/media?parent=611"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/modulesafari.com\/wp-json\/wp\/v2\/categories?post=611"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/modulesafari.com\/wp-json\/wp\/v2\/tags?post=611"},{"taxonomy":"yst_prominent_words","embeddable":true,"href":"http:\/\/modulesafari.com\/wp-json\/wp\/v2\/yst_prominent_words?post=611"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}